---
interface Props {
  src: string;
  alt?: string;
  class?: string;
  loading?: 'lazy' | 'eager';
  decoding?: 'sync' | 'async' | 'auto';
  fetchpriority?: 'high' | 'low' | 'auto';
}

const { src, alt = '', class: cls = '', loading = 'lazy', decoding = 'async', fetchpriority } = Astro.props as Props;

const webp = src.replace(/\.(jpe?g|png)$/i, '.webp');
---

<picture>
  <source srcset={webp} type="image/webp" />
  <img src={src} alt={alt} class={cls} loading={loading} decoding={decoding} fetchpriority={fetchpriority} />
</picture>
